WHOAT.dashboard=function(e,t,n){"use strict";var r="",i="",s="",o=!1,u=function(){var t=location.pathname;f.wireHome();if(t==="/dashboard"){f.outbox.wireOutbox();f.inbox.wireInbox();f.outbox.wireList();f.inbox.wireList()}if(t==="/outbox"){f.outbox.wireOutbox();f.outbox.wireList()}if(t==="/inbox"){f.outbox.wireInbox();f.inbox.wireList()}if(t==="/profile"){e("#dashboard_sidebar_menu > div").removeClass("on");WHOAT.profile.wireProfile("wire profile")}},a=function(){document.activeElement.blur();e("input").blur()},f=function(){function n(){var t=e(window).height()-(e("#top_bar").height()+e("footer").height());e("#sidebar, #content").css("height",t);e(window).resize(function(){var t=e(window).height()-(e("#top_bar").height()+e("footer").height());e("#sidebar, #content").css("height",t)})}var t=function(){n();s.wireGearMenu();h.wireSearchButton();d.wireSidebar()},i=function(){var t=function(){e("#spinner").show();e("#spinner").removeClass("animateDown");e("#spinner").addClass("animateUp");e("#spinner").bind("oanimationend animationend webkitAnimationEnd",function(){e("#spinner").show()})},n=function(){e("#spinner").removeClass("animateUp");e("#spinner").addClass("animateDown");e("#spinner").bind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",function(){e("#spinner").hide()})};return{up:t,down:n}}(),s=function(){var t=function(){e("html").unbind("click").bind("click",function(){if(o===!0){e(".gear_menu").slideUp(200);window.clearTimeout(r)}});e(".dash_settings").unbind("click").bind("click",function(t){o=!0;e(".gear_menu").slideToggle(200);t.stopPropagation()});e(".dash_settings").unbind("mouseleave").bind("mouseleave",function(){r=setTimeout(function(){},1500)});e(".dash_settings").unbind("mouseenter").bind("mouseenter",function(){window.clearTimeout(r)});e(".dash_settings #set-contacts").unbind("click").bind("click",function(){});e(".dash_settings #set-invite").unbind("click").bind("click",function(){});e(".dash_settings #set-sync").unbind("click").bind("click",function(){});e(".dash_settings #set-tour").unbind("click").bind("click",function(){WHOAT.modal.wireTourModal().startTour()});e(".dash_settings #set-profile").unbind("click").bind("click",function(){});e(".dash_settings #set-reports").unbind("click").bind("click",function(){window.location="/reports"});e(".dash_settings #set-logout").unbind("click").bind("click",function(){window.location="/logout"})};e(".gear_menu").unbind("mouseleave").bind("mouseleave",function(){r=setTimeout(function(){e(".gear_menu").slideUp(200);o=!1},1500)});e(".gear_menu").unbind("mouseenter").bind("mouseenter",function(){window.clearTimeout(r)});var n=function(){e(".gear_menu").slideDown(200);o=!0},i=function(){e(".gear_menu").slideUp(200);o=!1};return{wireGearMenu:t,show:n,hide:i}}(),u=function(){var t=function(){f.wireTableHighlighting()},n=function(){var t=function(){return"/outbox"},n=function(e){return"/outbox/"+e};e(".goto_outbox").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL(t())});e(".row_outbox").unbind("click").bind("click",function(){d.changeMenuStates(e("#intro"));var t=e(this).closest("tr"),r=t.data("message-id");WHOAT.networking.redirectToURL(n(r))})};return{wireList:t,wireOutbox:n}}(),l=function(){var t=function(){f.wireTableHighlighting()},n=function(){var t=function(){return"/inbox"},n=function(e){return"/inbox/"+e};e(".goto_inbox").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL(t())});e("#inbox_thead_message").unbind("mouseover").bind("mouseover",function(){e("#inbox_thead_message .help_bubble").fadeIn("fast")});e("#inbox_thead_message").unbind("mouseout").bind("mouseout",function(){e("#inbox_thead_message .help_bubble").hide()});e("#inbox_thead_actions").unbind("mouseover").bind("mouseover",function(){e("#inbox_thead_actions .help_bubble").fadeIn("fast")});e("#inbox_thead_actions").unbind("mouseout").bind("mouseout",function(){e("#inbox_thead_actions .help_bubble").hide()});e(".row_inbox").unbind("click").bind("click",function(){d.changeMenuStates(e("#intro"));var t=e(this).closest("tr"),r=t.data("message-id");WHOAT.networking.redirectToURL(n(r))})};return{wireList:t,wireInbox:n}}(),c=function(){e("tbody.wire_td_highlighting").delegate("td","mouseover mouseout",function(t){t.type=="mouseover"?e(this).parent().addClass("rowHover"):e(this).parent().removeClass("rowHover")})},h=function(){var t=function(e){return"/search/"+e},n=function(){var n;e(".search_highlight").unbind("mouseover").bind("mouseover",function(){e("#search_tooltip").animate({opacity:"1"})});e(".search_highlight").unbind("mouseout").bind("mouseout",function(){e("#search_tooltip").animate({opacity:"0"})});e("#intro_search").unbind("submit").bind("submit",function(){WHOAT.dashboard.hideKeyboard(e());n=e("#dash_search_input").val();window.location.pathname=t(n);WHOAT.analytics.trackSearchEvent(n);return!1})};return{wireSearchButton:n}}(),p=function(){var t=function(){return"/#!/browse/companies"},n=function(){return"/#!/browse/view/titles"},r=function(){return"/#!/browse/view/regions"},i=!1;e("#browse_btn").hover(function(){i===!1?e(this).css("background","#c4c4c4"):e(this).css("background","#f27619")},function(){i===!1?e(this).css("background","#d9d9d9"):e(this).css("background","#f58733")});e("#browse_btn").unbind("click").bind("click",function(t){if(i===!1){e(this).css("color","white");e(this).css("background","#f58733");e("#browse_selections").slideDown("fast");i=!0;s();t.stopPropagation()}else if(i){e(this).css("color","#515656");e(this).css("background","#d9d9d9");e("#browse_selections").slideUp("fast");i=!1;t.stopPropagation()}});var s=function(){e("#browse_companies").unbind("click").bind("click",function(){p.navigateToBrowse("companies")});e("#browse_titles").unbind("click").bind("click",function(){p.navigateToBrowse("titles")});e("#browse_regions").unbind("click").bind("click",function(){p.navigateToBrowse("regions")})},o=function(e){switch(e){case"companies":WHOAT.networking.redirectToURL(t());break;case"titles":WHOAT.networking.redirectToURL(n());break;case"regions":WHOAT.networking.redirectToURL(r())}};return{browseCompaniesURL:t,browseTitlesURL:n,browseRegionsURL:r,navigateToBrowse:o}}(),d=function(){function o(t){!t.height()<50&&t.slideDown(200);e(".goto_outbox").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL("/outbox")});e(".goto_inbox").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL("/inbox")})}function u(e){e.height()>50&&e.slideUp(200)}function f(e){!e.height()<400&&e.slideDown(400)}var t=location.pathname,n=function(){e(".go_to_profile").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL("/profile")});(t==="/outbox"||t==="/inbox")&&i()},r=function(t){var n=e(t);n.addClass("on");n.siblings().removeClass("on")},i=function(){e(".bookmark_bubble").css("top","457px");o(e("#intro_submenu"));r(e(".intro_sidebar_btn"))},s=function(){e(".bookmark_bubble").css("top","360px");e("#dashboard_menu .intro_sidebar_btn").removeClass("on");e("#intro_submenu .intro_subitem").removeClass("on");u(e("#intro_submenu"))};(t==="/reports"||t==="/reports/searches"||t==="/reports/top-hundred")&&o(e("#report_submenu"));if(t==="/reports/organizations"||t==="/reports/organizations/introductions"||t==="/reports/organizations/engagement"||t==="/reports/organizations/employer"){o(e("#report_submenu"));f(e(".sub_organizations"))}else if(t==="/reports/members"||t==="/reports/members/introductions"){o(e("#report_submenu"));f(e(".sub_members"))}else if(t==="/reports/heatmap/contact"||t==="/reports/heatmap/users"){o(e("#report_submenu"));f(e(".sub_heatmap"))}e("#dashboard_sidebar_menu > .dash-btn").unbind("click").bind("click",function(){var t=e(this);t.addClass("on");t.siblings().removeClass("on");if(t.hasClass("intro_sidebar_btn")){i();c()}else if(t.hasClass("reports_sidebar_btn")){l();s()}else if(t.hasClass("dash_sidebar_btn")){window.location="/dashboard";s();c()}});e("#report_submenu > .report_subitem").unbind("click").bind("click",function(){var t=e(this);t.hasClass("org")?a("org"):t.hasClass("members")?a("members"):t.hasClass("heatmap")&&a("heatmap")});var a=function(t){if(t==="org"){f(e(".sub_organizations"));var n=e("#report_submenu").height();e("#report_submenu").css("height",n+n)}else t==="members"?f(e(".sub_members")):t==="heatmap"&&f(e(".sub_heatmap"))},l=function(){e("#getting_started_guides").hide();e("#guide_seperator").hide();e("#bookmarklet").hide();o(e("#report_submenu"));r(e("#report"))},c=function(){e(".bookmark_bubble").css("top","360px");e("#report_submenu").removeClass("on");u(e("#report_submenu"))},h=function(){s()};e("#bookmark_learn").unbind("hover").bind("hover",function(){e(".bookmark_bubble").show()});e("#bookmark_learn").unbind("mouseout").bind("mouseout",function(){e(".bookmark_bubble").hide()});return{wireSidebar:n,openIntroMenu:i,closeIntroMenu:s,changeMenuStates:r,reset:h}}();return{wireHome:t,spinner:i,gearMenu:s,hideKeyboard:a,wireTableHighlighting:c,browse:p,search:h,sideBar:d,outbox:u,inbox:l}}();return{init:u,hideKeyboard:a,home:f}}(jQuery,window);$(document).ready(function(){WHOAT.dashboard.init()});typeof Object.create!="function"&&(Object.create=function(e){function t(){}t.prototype=e;return new t});var ua={toString:function(){return navigator.userAgent},test:function(e){return this.toString().toLowerCase().indexOf(e.toLowerCase())>-1}};ua.version=(ua.toString().toLowerCase().match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1];ua.webkit=ua.test("webkit");ua.gecko=ua.test("gecko")&&!ua.webkit;ua.opera=ua.test("opera");ua.ie=ua.test("msie")&&!ua.opera;ua.ie6=ua.ie&&document.compatMode&&typeof document.documentElement.style.maxHeight=="undefined";ua.ie7=ua.ie&&document.documentElement&&typeof document.documentElement.style.maxHeight!="undefined"&&typeof XDomainRequest=="undefined";ua.ie8=ua.ie&&typeof XDomainRequest!="undefined";var domReady=function(){var e=[],t=function(){if(!arguments.callee.done){arguments.callee.done=!0;for(var t=0;t<e.length;t++)e[t]()}};document.addEventListener&&document.addEventListener("DOMContentLoaded",t,!1);if(ua.ie){(function(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,50);return}t()})();document.onreadystatechange=function(){if(document.readyState==="complete"){document.onreadystatechange=null;t()}}}ua.webkit&&document.readyState&&function(){document.readyState!=="loading"?t():setTimeout(arguments.callee,10)}();window.onload=t;return function(t){typeof t=="function"&&(e[e.length]=t);return t}}(),cssHelper=function(){var e={BLOCKS:/[^\s{][^{]*\{(?:[^{}]*\{[^{}]*\}[^{}]*|[^{}]*)*\}/g,BLOCKS_INSIDE:/[^\s{][^{]*\{[^{}]*\}/g,DECLARATIONS:/[a-zA-Z\-]+[^;]*:[^;]+;/g,RELATIVE_URLS:/url\(['"]?([^\/\)'"][^:\)'"]+)['"]?\)/g,REDUNDANT_COMPONENTS:/(?:\/\*([^*\\\\]|\*(?!\/))+\*\/|@import[^;]+;)/g,REDUNDANT_WHITESPACE:/\s*(,|:|;|\{|\})\s*/g,MORE_WHITESPACE:/\s{2,}/g,FINAL_SEMICOLONS:/;\}/g,NOT_WHITESPACE:/\S+/g},t,n=!1,r=[],i=function(e){typeof e=="function"&&(r[r.length]=e)},s=function(){for(var e=0;e<r.length;e++)r[e](t)},o={},u=function(e,t){if(o[e]){var n=o[e].listeners;if(n)for(var r=0;r<n.length;r++)n[r](t)}},a=function(e,t,n){ua.ie&&!window.XMLHttpRequest&&(window.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});if(!XMLHttpRequest)return"";var r=new XMLHttpRequest;try{r.open("get",e,!0);r.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest")}catch(i){n();return}var s=!1;setTimeout(function(){s=!0},5e3);document.documentElement.style.cursor="progress";r.onreadystatechange=function(){if(r.readyState===4&&!s){!r.status&&location.protocol==="file:"||r.status>=200&&r.status<300||r.status===304||navigator.userAgent.indexOf("Safari")>-1&&typeof r.status=="undefined"?t(r.responseText):n();document.documentElement.style.cursor="";r=null}};r.send("")},f=function(t){t=t.replace(e.REDUNDANT_COMPONENTS,"");t=t.replace(e.REDUNDANT_WHITESPACE,"$1");t=t.replace(e.MORE_WHITESPACE," ");t=t.replace(e.FINAL_SEMICOLONS,"}");return t},l={mediaQueryList:function(t){var n={},r=t.indexOf("{"),i=t.substring(0,r);t=t.substring(r+1,t.length-1);var s=[],o=[],u=i.toLowerCase().substring(7).split(",");for(var a=0;a<u.length;a++)s[s.length]=l.mediaQuery(u[a],n);var f=t.match(e.BLOCKS_INSIDE);if(f!==null)for(a=0;a<f.length;a++)o[o.length]=l.rule(f[a],n);n.getMediaQueries=function(){return s};n.getRules=function(){return o};n.getListText=function(){return i};n.getCssText=function(){return t};return n},mediaQuery:function(t,n){t=t||"";var r=!1,i,s=[],o=!0,u=t.match(e.NOT_WHITESPACE);for(var a=0;a<u.length;a++){var f=u[a];if(!!i||f!=="not"&&f!=="only"){if(!i)i=f;else if(f.charAt(0)==="("){var l=f.substring(1,f.length-1).split(":");s[s.length]={mediaFeature:l[0],value:l[1]||null}}}else f==="not"&&(r=!0)}return{getList:function(){return n||null},getValid:function(){return o},getNot:function(){return r},getMediaType:function(){return i},getExpressions:function(){return s}}},rule:function(e,t){var n={},r=e.indexOf("{"),i=e.substring(0,r),s=i.split(","),o=[],u=e.substring(r+1,e.length-1).split(";");for(var a=0;a<u.length;a++)o[o.length]=l.declaration(u[a],n);n.getMediaQueryList=function(){return t||null};n.getSelectors=function(){return s};n.getSelectorText=function(){return i};n.getDeclarations=function(){return o};n.getPropertyValue=function(e){for(var t=0;t<o.length;t++)if(o[t].getProperty()===e)return o[t].getValue();return null};return n},declaration:function(e,t){var n=e.indexOf(":"),r=e.substring(0,n),i=e.substring(n+1);return{getRule:function(){return t||null},getProperty:function(){return r},getValue:function(){return i}}}},c=function(n){if(typeof n.cssHelperText!="string")return;var r={mediaQueryLists:[],rules:[],selectors:{},declarations:[],properties:{}},i=r.mediaQueryLists,s=r.rules,o=n.cssHelperText.match(e.BLOCKS);if(o!==null)for(var u=0;u<o.length;u++)if(o[u].substring(0,7)==="@media "){i[i.length]=l.mediaQueryList(o[u]);s=r.rules=s.concat(i[i.length-1].getRules())}else s[s.length]=l.rule(o[u]);var a=r.selectors,f=function(e){var t=e.getSelectors();for(var n=0;n<t.length;n++){var r=t[n];a[r]||(a[r]=[]);a[r][a[r].length]=e}};for(u=0;u<s.length;u++)f(s[u]);var c=r.declarations;for(u=0;u<s.length;u++)c=r.declarations=c.concat(s[u].getDeclarations());var h=r.properties;for(u=0;u<c.length;u++){var p=c[u].getProperty();h[p]||(h[p]=[]);h[p][h[p].length]=c[u]}n.cssHelperParsed=r;t[t.length]=n;return r},h=function(e,t){e.cssHelperText=f(t||e.innerHTML);return c(e)},p=function(){n=!0;t=[];var r=[],i=function(){for(var e=0;e<r.length;e++)c(r[e]);var t=document.getElementsByTagName("style");for(e=0;e<t.length;e++)h(t[e]);n=!1;s()},o=document.getElementsByTagName("link");for(var u=0;u<o.length;u++){var l=o[u];l.getAttribute("rel").indexOf("style")>-1&&l.href&&l.href.length!==0&&!l.disabled&&(r[r.length]=l)}if(r.length>0){var p=0,d=function(){p++;p===r.length&&i()},v=function(t){var n=t.href;a(n,function(r){r=f(r).replace(e.RELATIVE_URLS,"url("+n.substring(0,n.lastIndexOf("/"))+"/$1)");t.cssHelperText=r;d()},d)};for(u=0;u<r.length;u++)v(r[u])}else i()},d={mediaQueryLists:"array",rules:"array",selectors:"object",declarations:"array",properties:"object"},v={mediaQueryLists:null,rules:null,selectors:null,declarations:null,properties:null},m=function(e,t){if(v[e]!==null){if(d[e]==="array")return v[e]=v[e].concat(t);var n=v[e];for(var r in t)t.hasOwnProperty(r)&&(n[r]?n[r]=n[r].concat(t[r]):n[r]=t[r]);return n}},g=function(e){v[e]=d[e]==="array"?[]:{};for(var n=0;n<t.length;n++)m(e,t[n].cssHelperParsed[e]);return v[e]};domReady(function(){var e=document.body.getElementsByTagName("*");for(var t=0;t<e.length;t++)e[t].checkedByCssHelper=!0;document.implementation.hasFeature("MutationEvents","2.0")||window.MutationEvent?document.body.addEventListener("DOMNodeInserted",function(e){var t=e.target;if(t.nodeType===1){u("DOMElementInserted",t);t.checkedByCssHelper=!0}},!1):setInterval(function(){var e=document.body.getElementsByTagName("*");for(var t=0;t<e.length;t++)if(!e[t].checkedByCssHelper){u("DOMElementInserted",e[t]);e[t].checkedByCssHelper=!0}},1e3)});var y=function(e){if(typeof window.innerWidth!="undefined")return window["inner"+e];if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0)return document.documentElement["client"+e]};return{addStyle:function(e,t){var n=document.createElement("style");n.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(n);n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e));n.addedWithCssHelper=!0;typeof t=="undefined"||t===!0?cssHelper.parsed(function(t){var r=h(n,e);for(var i in r)r.hasOwnProperty(i)&&m(i,r[i]);u("newStyleParsed",n)}):n.parsingDisallowed=!0;return n},removeStyle:function(e){return e.parentNode.removeChild(e)},parsed:function(e){if(n)i(e);else if(typeof t!="undefined")typeof e=="function"&&e(t);else{i(e);p()}},mediaQueryLists:function(e){cssHelper.parsed(function(t){e(v.mediaQueryLists||g("mediaQueryLists"))})},rules:function(e){cssHelper.parsed(function(t){e(v.rules||g("rules"))})},selectors:function(e){cssHelper.parsed(function(t){e(v.selectors||g("selectors"))})},declarations:function(e){cssHelper.parsed(function(t){e(v.declarations||g("declarations"))})},properties:function(e){cssHelper.parsed(function(t){e(v.properties||g("properties"))})},broadcast:u,addListener:function(e,t){if(typeof t=="function"){o[e]||(o[e]={listeners:[]});o[e].listeners[o[e].listeners.length]=t}},removeListener:function(e,t){if(typeof t=="function"&&o[e]){var n=o[e].listeners;for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);r-=1}}},getViewportWidth:function(){return y("Width")},getViewportHeight:function(){return y("Height")}}}();domReady(function(){var t,n={LENGTH_UNIT:/[0-9]+(em|ex|px|in|cm|mm|pt|pc)$/,RESOLUTION_UNIT:/[0-9]+(dpi|dpcm)$/,ASPECT_RATIO:/^[0-9]+\/[0-9]+$/,ABSOLUTE_VALUE:/^[0-9]*(\.[0-9]+)*$/},r=[],i=function(){var e="css3-mediaqueries-test",t=document.createElement("div");t.id=e;var n=cssHelper.addStyle("@media all and (width) { #"+e+" { width: 1px !important; } }",!1);document.body.appendChild(t);var r=t.offsetWidth===1;n.parentNode.removeChild(n);t.parentNode.removeChild(t);i=function(){return r};return r},s=function(){t=document.createElement("div");t.style.cssText="position:absolute;top:-9999em;left:-9999em;margin:0;border:none;padding:0;width:1em;font-size:1em;";document.body.appendChild(t);t.offsetWidth!==16&&(t.style.fontSize=16/t.offsetWidth+"em");t.style.width=""},o=function(e){t.style.width=e;var n=t.offsetWidth;t.style.width="";return n},u=function(e,t){var r=e.length,i=e.substring(0,4)==="min-",s=!i&&e.substring(0,4)==="max-";if(t!==null){var u,a;if(n.LENGTH_UNIT.exec(t)){u="length";a=o(t)}else if(n.RESOLUTION_UNIT.exec(t)){u="resolution";a=parseInt(t,10);var f=t.substring((a+"").length)}else if(n.ASPECT_RATIO.exec(t)){u="aspect-ratio";a=t.split("/")}else if(n.ABSOLUTE_VALUE){u="absolute";a=t}else u="unknown"}var l,c;if("device-width"===e.substring(r-12,r)){l=screen.width;return t!==null?u==="length"?i&&l>=a||s&&l<a||!i&&!s&&l===a:!1:l>0}if("device-height"===e.substring(r-13,r)){c=screen.height;return t!==null?u==="length"?i&&c>=a||s&&c<a||!i&&!s&&c===a:!1:c>0}if("width"===e.substring(r-5,r)){l=document.documentElement.clientWidth||document.body.clientWidth;return t!==null?u==="length"?i&&l>=a||s&&l<a||!i&&!s&&l===a:!1:l>0}if("height"===e.substring(r-6,r)){c=document.documentElement.clientHeight||document.body.clientHeight;return t!==null?u==="length"?i&&c>=a||s&&c<a||!i&&!s&&c===a:!1:c>0}if("device-aspect-ratio"===e.substring(r-19,r))return u==="aspect-ratio"&&screen.width*a[1]===screen.height*a[0];if("color-index"===e.substring(r-11,r)){var h=Math.pow(2,screen.colorDepth);return t!==null?u==="absolute"?i&&h>=a||s&&h<a||!i&&!s&&h===a:!1:h>0}if("color"===e.substring(r-5,r)){var p=screen.colorDepth;return t!==null?u==="absolute"?i&&p>=a||s&&p<a||!i&&!s&&p===a:!1:p>0}if("resolution"===e.substring(r-10,r)){var d;f==="dpcm"?d=o("1cm"):d=o("1in");return t!==null?u==="resolution"?i&&d>=a||s&&d<a||!i&&!s&&d===a:!1:d>0}return!1},a=function(e){var t=e.getValid(),n=e.getExpressions(),r=n.length;if(r>0){for(var i=0;i<r&&t;i++)t=u(n[i].mediaFeature,n[i].value);var s=e.getNot();return t&&!s||s&&!t}},f=function(e){var t=e.getMediaQueries(),n={};for(var i=0;i<t.length;i++)a(t[i])&&(n[t[i].getMediaType()]=!0);var s=[],o=0;for(var u in n)if(n.hasOwnProperty(u)){o>0&&(s[o++]=",");s[o++]=u}s.length>0&&(r[r.length]=cssHelper.addStyle("@media "+s.join("")+"{"+e.getCssText()+"}",!1))},l=function(e){for(var t=0;t<e.length;t++)f(e[t]);if(ua.ie){document.documentElement.style.display="block";setTimeout(function(){document.documentElement.style.display=""},0);setTimeout(function(){cssHelper.broadcast("cssMediaQueriesTested")},100)}else cssHelper.broadcast("cssMediaQueriesTested")},c=function(){for(var e=0;e<r.length;e++)cssHelper.removeStyle(r[e]);r=[];cssHelper.mediaQueryLists(l)},h=0,p=function(){var e=cssHelper.getViewportWidth(),t=cssHelper.getViewportHeight();if(ua.ie){var n=document.createElement("div");n.style.position="absolute";n.style.top="-9999em";n.style.overflow="scroll";document.body.appendChild(n);h=n.offsetWidth-n.clientWidth;document.body.removeChild(n)}var r,s=function(){var n=cssHelper.getViewportWidth(),s=cssHelper.getViewportHeight();if(Math.abs(n-e)>h||Math.abs(s-t)>h){e=n;t=s;clearTimeout(r);r=setTimeout(function(){i()?cssHelper.broadcast("cssMediaQueriesTested"):c()},500)}};window.onresize=function(){var e=window.onresize||function(){};return function(){e();s()}}()},d=document.documentElement;d.style.marginLeft="-32767px";setTimeout(function(){d.style.marginTop=""},2e4);return function(){if(!i()){cssHelper.addListener("newStyleParsed",function(e){l(e.cssHelperParsed.mediaQueryLists)});cssHelper.addListener("cssMediaQueriesTested",function(){ua.ie&&(d.style.width="1px");setTimeout(function(){d.style.width="";d.style.marginLeft=""},0);cssHelper.removeListener("cssMediaQueriesTested",arguments.callee)});s();c()}else d.style.marginLeft="";p()}}());try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}(function(e,t){function n(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function r(e){var t=p[e[c]];t||(t={},h++,e[c]=h,p[h]=t);return t}function i(e,n,i){n||(n=t);if(d)return n.createElement(e);i||(i=r(n));n=i.cache[e]?i.cache[e].cloneNode():f.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e);return n.canHaveChildren&&!a.test(e)?i.frag.appendChild(n):n}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag());e.createElement=function(n){return v.shivMethods?i(n,e,t):t.createElem(n)};e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){t.createElem(e);t.frag.createElement(e);return'c("'+e+'")'})+");return n}")(v,t.frag)}function o(e){e||(e=t);var n=r(e);if(v.shivCSS&&!l&&!n.hasCSS){var i,o=e;i=o.createElement("p");o=o.getElementsByTagName("head")[0]||o.documentElement;i.innerHTML="x<style>article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}</style>";i=o.insertBefore(i.lastChild,o.firstChild);n.hasCSS=!!i}d||s(e,n);return e}var u=e.html5||{},a=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,l,c="_html5shiv",h=0,p={},d;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>";l="hidden"in e;var n;if(!(n=1==e.childNodes.length)){t.createElement("a");var r=t.createDocumentFragment();n="undefined"==typeof r.cloneNode||"undefined"==typeof r.createDocumentFragment||"undefined"==typeof r.createElement}d=n}catch(i){d=l=!0}})();var v={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:"3.6.2pre",shivCSS:!1!==u.shivCSS,supportsUnknownElements:d,shivMethods:!1!==u.shivMethods,type:"default",shivDocument:o,createElement:i,createDocumentFragment:function(e,i){e||(e=t);if(d)return e.createDocumentFragment();for(var i=i||r(e),s=i.frag.cloneNode(),o=0,u=n(),a=u.length;o<a;o++)s.createElement(u[o]);return s}};e.html5=v;o(t)})(this,document);window.Modernizr=function(e,t,n){function r(e){d.cssText=e}function i(e,t){return r(g.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}var a="2.6.2",f={},l=!0,c=t.documentElement,h="modernizr",p=t.createElement(h),d=p.style,v,m={}.toString,g=" -webkit- -moz- -o- -ms- ".split(" "),y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,p=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:h+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),f.id=h,(l?f:p).innerHTML+=s,p.appendChild(f),l||(p.style.background="",p.style.overflow="hidden",a=c.style.overflow,c.style.overflow="hidden",c.appendChild(p)),o=n(f,e),l?f.parentNode.removeChild(f):(p.parentNode.removeChild(p),c.style.overflow=a),!!o},N={}.hasOwnProperty,C;!s(N,"undefined")&&!s(N.call,"undefined")?C=function(e,t){return N.call(e,t)}:C=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=S.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(S.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(S.call(arguments)))};return r}),y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",g.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n};for(var k in y)C(y,k)&&(x=k.toLowerCase(),f[x]=y[k](),E.push((f[x]?"":"no-")+x));return f.addTest=function(e,t){if(typeof e=="object")for(var r in e)C(e,r)&&f.addTest(r,e[r]);else{e=e.toLowerCase();if(f[e]!==n)return f;t=typeof t=="function"?t():t,typeof l!="undefined"&&l&&(c.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),p=v=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=v[e[p]];return t||(t={},d++,e[p]=d,v[d]=t),t}function s(e,n,r){n||(n=t);if(m)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():c.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!l.test(e)?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(m)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function a(e){e||(e=t);var r=i(e);return g.shivCSS&&!h&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||u(e,r),e}var f=e.html5||{},l=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h,p="_html5shiv",d=0,v={},m;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,m=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){h=!0,m=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:m,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=g,a(t)}(this,t),f._version=a,f._prefixes=g,f.testStyles=T,c.className=c.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(l?" js "+E.join(" "):""),f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window
,[].slice.call(arguments,0))};var WHOAT=WHOAT||{};WHOAT.base=function(e,t,n){"use strict";return{}}(jQuery,window);WHOAT.events=function(e,t,n){"use strict";function r(t){var r=JSON.parse(t),i=r.result==="success",s=e("<div>"),o;i?s.addClass("alert alert-success"):s.addClass("alert alert-error");r.message!==n?o=r.message:i?o="Success":o="There was an error. Please try again later.";s.html(e("<h4>").html(o));s.hide();s.appendTo(".notification-container");s.show("slow");return s}function i(t){var n=r(t);setTimeout(function(){e(n).slideUp("slow",function(){e(n).remove()})},5e3)}function s(t){var n=e("tr[data-message-id='"+t+"']");n&&n.remove()}function o(t){var n=e("tr[data-message-id='"+t+"']"),r;if(n){r=n.find("td:first");r.removeClass("pending-cell");r.addClass("accepted-cell");r.find("p").html("Accepted")}}function u(t){var n=e(t),r=n.find("td:first");n.hasClass("unread-row")&&n.removeClass("unread-row");if(r.hasClass("unread-cell")){r.removeClass("unread-cell");r.addClass("pending-cell");r.html("");r.append("<div><span></span></div>");r.append("<p>Pending</p>")}}var a=function(t){var n=e(t);n.unbind("submit").bind("submit",function(){WHOAT.validation.validateLoginForm(this)&&WHOAT.networking.postToServerWithForm(this);return!1});n.find("input[name='password']").unbind("keyup").bind("keyup",function(e){e.keyCode===13&&n.find("button").click()})},f=function(t,n){var r=e(t);r.unbind("click").bind("click",function(){WHOAT.animations.animateLoginContainer(n)})},l=function(t,n){var r=e(t);r.unbind("click").bind("click",function(){WHOAT.networking.postToServer("/logout")})},c=function(t){var n=e(t);n.find("input[name='register_password']").unbind("keyup").bind("keyup",function(e){e.keyCode===13&&this.find("button").click()})},h=function(){var t=e("#register-email").val();e("#body-login .login-logo img").animate({top:"-=15"},1e3,function(){});e("#alert-user-email").text(t);e("#body-login .login-logo p").fadeIn("slow");e("#register-form").hide();e("#form-background").animate({height:273},200);e("#login-form").fadeToggle();e(".login-unselected").removeClass("login-unselected").addClass("login-selected");e(".login-selected").parent().find("#tab-register").removeClass("register-selected").addClass("register-unselected")},p=function(t){var n=e(t);n.unbind("submit").bind("submit",function(){WHOAT.validation.validateSendForgotPasswordForm(n);return!1});n.find("input[name='email']").unbind("keyup").bind("keyup",function(e){e.keyCode===13&&n.find("button").click()})},d=function(n){var r=e(n);r.find("a").unbind("click").bind("click",function(){WHOAT.networking.redirectToURL("/login")});r.unbind("submit").bind("submit",function(){if(WHOAT.validation.validateForgotPasswordForm(this)){var n=t.location.search;e(this).attr("action",e(this).attr("action")+n);WHOAT.networking.postToServerWithForm(this)}return!1});r.find("input[name='email']").unbind("keyup").bind("keyup",function(e){e.keyCode===13&&r.find("button").click()})},v=function(t,n){var r=e(t),i=!1;r.find("> tr:not(.footable-row-detail) td").unbind("click").bind("click",function(t){var s=e(this),o=e(this).parents("tr:first");if(i)return;i=!0;if(s.index()===0&&r.is(".breakpoint"))return;var a=o.data("message-id"),f="",l;n===WHOAT.enums.tableEnum.INCOMING?f="/incoming/"+a:n===WHOAT.enums.tableEnum.MY_REQUESTS&&(f="/myrequests/"+a);l={id:a};WHOAT.networking.postToServerWithAjax(f,l,function(t){WHOAT.animations.pushAndHideContent(t,e("#dashboard-body"));i=!1;u(o)})})},m=function(t,n){var r=e(t);r.find("tr button").unbind("click").bind("click",function(t){var n=e(this).parents("tr:first").data("user-details"),r=e("#contactModal"),s=e("#tmpl-contact-details").html(),o=e("#tmpl-intro-request").html(),u,a,f,l;if(n.userNetworks.inPersonal===0){e("#contactDetails").hide();r.find(".close:last").show()}else{u=Handlebars.compile(s);a=u(n);f=e("#contactDetails").find(".modal-body");f.empty();e(a).appendTo(f);f.find(".close:last").hide();e("#contactDetails").show()}if(n.userNetworks.inGroup>0||n.userNetworks.inOrganization>0||n.userNetworks.inFriends>0){u=Handlebars.compile(o);a=u(n);l=e("#requestIntro").find(".modal-body");l.empty();e(a).appendTo(l);e("#requestIntro").show()}else e("#requestIntro").hide();r.modal("show");r.find(".btn-primary").unbind("click").bind("click",function(){e(this).button("loading");var t=r.find("textarea"),s=t.val(),o=n.guid,u=[],a;s===""&&(s=t.attr("placeholder"));for(var f=0;f<n.networks.length;f++)u[f]=n.networks[f].guid;a={message:s,networks:u,target:o};WHOAT.networking.postToServerWithAjax("/createrequest",a,function(e){r.modal("hide");i(e);r.find(".btn-primary").button("reset")})})})},g=function(t){var n=e(t),r=n.find(".accept-decline-select-container"),u=n.find(".accept-decline-reply-container:first"),a=n.find(".accept-decline-reply-container:last"),f=r.find(".btn-accept"),l=r.find(".btn-decline"),c=n.find(".dashboard-message-details-response-container");f.unbind("click").bind("click",function(){r.fadeOut("normal",function(){u.fadeIn("normal")})});l.unbind("click").bind("click",function(){r.fadeOut("normal",function(){a.fadeIn("normal")})});c.find(".accept-decline-reply-container a").unbind("click").bind("click",function(){e.when(c.find(".accept-decline-reply-container").fadeOut("normal")).done(function(){r.fadeIn("normal")});return!1});u.find('form[name="acceptForm"]').unbind("submit").bind("submit",function(){var e=u.find("textarea").val();e==""?e=u.find("textarea").attr("placeholder"):e=WHOAT.utility.trimFromBeginningAndEnd(e);var t=n.data("message-id"),r={message:e,id:t},s="/incoming/"+t+"/accept";WHOAT.networking.postToServerWithAjax(s,r,function(e){i(e);o(t);n.find(".btn-back").click()});return!1});a.find('form[name="declineForm"]').unbind("submit").bind("submit",function(){var e=a.find("textarea").val();e&&e!==""&&(e=WHOAT.utility.trimFromBeginningAndEnd(e));var t=n.data("message-id"),r={message:e,id:t},o="/incoming/"+t+"/decline";WHOAT.networking.postToServerWithAjax(o,r,function(e){i(e);s(t);n.find(".btn-back").click()});return!1})},y=function(t){var n=e(t);n.find(".last-child a:last").unbind("click").bind("click",function(){var e=n.data("message-id"),t={id:e},r="/myrequests/"+e+"/delete";WHOAT.networking.postToServerWithAjax(r,t,function(t){i(t);s(e);n.find(".btn-back").click()});return!1})},b=function(t,n){e(t).unbind("click").bind("click",function(){if(e(n).find("> div:hidden").length>0){WHOAT.animations.popAndPushContent(n);return!1}WHOAT.networking.redirectToURL(e(this).attr("href"))})},w=function(t){var n=e(t);setTimeout(function(){n.slideUp("slow",function(){n.html("")})},5e3)},E=function(n){var r=e(n),i=t.location.pathname.replace(new RegExp("//[0-9]+/"),""),s=new RegExp(i.replace(/\/$/,""));r.find("a").each(function(){s.test(this.href.replace(/\/$/,""))&&e(this).addClass("active")})},S=function(t){var n=e(t);n.find("a").unbind("click").bind("click",function(){e(".popover").remove()})};return{wireLoginForm:a,wireMultipleForms:S,wireDashboardNav:E,wireNotificationContainer:w,wireBackButtonToPopContents:b,wireMyRequestDetailsForm:y,wireIncomingDetailsForm:g,wireSearchTableBody:m,wireMessageTableBody:v,wireResetPasswordForm:d,wireSendPasswordResetForm:p,wireRegisterForm:c,wireLogoutButton:l,wireLoginButton:f}}(jQuery,window);WHOAT.networking=function(e,t,n){"use strict";var r=function(t,n,r,i){WHOAT.analytics.trackPageView(t);e.ajax({type:i,url:t,cache:!1,data:n,dataType:"JSON",statusCode:{200:function(e,t,n){r(e)},201:function(e,t,n){r(e)},400:function(e,t,n){r(e)}}})},i=function(t,n,r,i){WHOAT.analytics.trackPageView(t);e.ajax({type:i,url:t,data:n,success:r,dataType:"JSON",statusCode:{200:function(e,t,n){r(e)},201:function(e,t,n){r(e)},400:function(e,t,n){r(e)}}})},s=function(e,t,n){r(e,t,n,"POST")},o=function(e,t,n){i(e,t,n,"POST")},u=function(e,t,n){r(e,t,n,"GET")},a=function(t){var n=e(t),r=n.attr("action");WHOAT.analytics.trackPageView(r);n.unbind("submit");n.submit()},f=function(t,n){WHOAT.analytics.trackPageView(t);var r=e('<form id="mapform" action="'+t+'" method="post"></form>');for(var i in n)n.hasOwnProperty(i)&&r.append('<input type="hidden" name="'+i+'" id="'+i+'" value="'+n[i]+'" />');e("body").append(r);r.submit()},l=function(e){WHOAT.analytics.trackPageView(e);window.location=e};return{postToServerWithAjax:s,postViaAjax:o,postToServerWithForm:a,getToServerWithAjax:u,postToServer:f,redirectToURL:l}}(jQuery,window);WHOAT.validation=function(e,t,n){"use strict";function f(e){var t=e.split(".");return t[t.length-1]}function l(t,n,r){var i=e(n);i.data({content:r});i.css("border-color","#f58733");switch(t){case"login-email-required":e("#msg-username span").text(r);e("#msg-username").fadeIn("fast");e(".tip-msg").css("text-indent","-134px");break;case"login-email-invalid":e("#msg-username span").text(r);e("#msg-username").fadeIn("fast");e("#error-email span").text(r);e("#error-email").fadeIn("fast");break;case"login2-password-required":e("#error-password span").text(r);e("#error-password").fadeIn("fast");break;case"login2-password-invalid":e("#error-password span").text(r);e("#error-password").fadeIn("fast");break;case"login2-password":e("#error-password span").text(r);e("#error-password").fadeOut("fast");break;case"login-password-required":e("#msg-password span").text(r);e("#msg-password").fadeIn("fast");e(".tip-msg2").css("text-indent","-163px");break;case"login-password-invalid":e("#msg-password span").text(r);e("#msg-password").fadeIn("fast");e(".tip-msg2").css("text-indent","-172px");break;case"email":e("#register-form #register-error-email span").text(r);e("#register-form #register-error-email").fadeIn("fast");break;case"firstname":e("#register-form #error-first-name span").text(r);e("#register-form #error-first-name").fadeIn("fast");break;case"lastname":e("#register-form #error-last-name span").text(r);e("#register-form #error-last-name").fadeIn("fast");break;case"password":e("#register-form #register-error-password span").text(r);e("#register-form #register-error-password").fadeIn("fast");break;case"reset-pass":e("#reset_msg_error span").text("Password is required");e("#reset_msg_error").fadeIn("fast");break;case"reset-6":e("#reset_msg_error span").text("Must be at least 6 characters");e("#reset_msg_error").fadeIn("fast");break;case"reset-match":e("#reset_msg_error span").text("Passwords must match");e("#reset_msg_error").fadeIn("fast")}}var r=/[A-Za-z]/,i=/[0-9{7,}]/,s=/^..*[@]..*[.]..*$/,o={placement:"right",animation:!1,esc_close:0,trigger:"manual"},u=!1,a=!1,c=function(e){var t=f(e);switch(t.toLowerCase()){case"vcf":case"json":case"csv":return!0}return!1},h=function(e){return s.test(e)===!0},p=function(e){return r.test(e)===!1&&phoneRegex.test(e)===!0},d=function(e){return e.length===0},v=function(t,n){var r=e(n),i=r.find("input[name='username']"),s=r.find("input[name='password']"),o=!0;if(d(i.val())===!0){l("login-email-required",i,"Username not registered");o=!1}else if(h(i.val())===!1){l("login-email-invalid",i,"Please use a valid email");o=!1}else h(i.val())===!0;if(t=="home_login"){if(d(s.val())===!0){l("login-password-required",s,"Password is required");o=!1}else if(s.val().length<6){l("login-password-invalid",s,"6 characters minimum");o=!1}}else if(t=="login_login")if(d(s.val())===!0){l("login2-password-required",s,"Password is required");o=!1}else if(s.val().length<6){l("login2-password-invalid",s,"6 characters minimum");o=!1}else if(s.val().length>=6){l("login2-password",s,"");o=!1}return o},m=function(t){var n=e(t),r=n.find("input[name='register_email']"),i=n.find("input[name='register_first_name']"),s=n.find("input[name='register_last_name']"),o=n.find("input[name='register_password']"),u=!0;if(d(r.val())===!0){l("email",r,"Email is required");u=!1}else if(h(r.val())===!1){l("email",r,"A valid email is required");u=!1}if(d(i.val())===!0){l("firstname",i,"First name is requrired");u=!1}if(d(s.val())===!0){l("lastname",s,"Last name is requrired");u=!1}if(d(o.val())===!0){l("password",o,"Password is requrired");u=!1}else if(o.val().length<6){l("password",o,"Minimum 6 Characters");u=!1}else if(o.val().length>=6){l("password",o,"");e(".tip-register_password").hide();u=!1}return u},g=function(t){var n=e(t),r=n.find("input[name='email']"),i=!0;if(d(r.val())===!0){l(r,"Email is required");i=!1}else if(h(r.val())===!1){l(r,"Invalid email");i=!1}return i},y=function(t){var n=e(t),r=n.find("input[name='resetPass1']"),i=n.find("input[name='resetPass2']"),s=!0;if(d(r.val())===!0){l("reset-pass","Password is requrired");s=!1}else if(r.val().length<6){l("reset-6","Must be at least 6 characters");s=!1}if(d(i.val())===!0){l("reset-pass","Password is requrired");s=!1}else if(i.val().length<6){l("reset-6","Must be at least 6 characters");s=!1}if(r.val()!==i.val()){l("reset-match","Passwords must match");s=!1}return s};return{isValidContactSource:c,isValidEmail:h,isValidPhone:p,isBlank:d,validateLoginForm:v,validateRegisterForm:m,validateSendForgotPasswordForm:g,validateForgotPasswordForm:y}}(jQuery,window);var _gaq=_gaq||[];_gaq.lang="en";_gaq.push(["_setAccount","UA-28028192-1"]);_gaq.push(["_setDomainName","whoat.net"]);_gaq.push(["_setAllowLinker",!1]);_gaq.push(["_gat._anonymizeIp"]);_gaq.push(["_trackPageview"]);WHOAT.analytics=function(e,t,n){"use strict";function r(){(function(){var e=document.createElement("script");e.type="text/javascript";var t=document.getElementsByTagName("script")[0];e.async=!0;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";t.parentNode.insertBefore(e,t)})()}var i=function(e){if(e===null||e===n)e=t.location.pathname;e=e.replace(new RegExp(/\/[0-9]+$/),"/details");_gaq.push(["_trackPageview",e])},s=function(e){var n=t.location.pathname;n=n.replace(new RegExp(/\/[0-9]+$/),"/details");_gaq.push(["_trackEvent","search",e,"url for search is "+n])},o=function(e,t,r){var i;r!==null&&r!==n?i="video id is "+t+" and time is "+r:i="video id is "+t;_gaq.push(["_trackEvent","video",e,i])};i();return{trackPageView:i,trackSearchEvent:s,trackVideoEvent:o,init:r}}(jQuery,window);$(document).ready(function(){WHOAT.analytics.init()});WHOAT.consoleLog=function(e,t,n){"use strict";function r(){i()}var i=function(e){};return{traceThis:i,init:r}}(jQuery,window);$(document).ready(function(){WHOAT.consoleLog.init()});WHOAT.modal=function(e,t,n){"use strict";var r=function(){},i=function(){var t=function(){function a(t){t==="closed"&&e(".overlay").hide();e("#tour_modal").hide();e('[id^="tour_"]').stop(!0,!0);i=function(){}}var t=1,n=0,r=function(t){e("#tour_modal").find("section").fadeOut();t===1?e("#tour_1").fadeIn():t===2?e("#tour_2").fadeIn():t===3?e("#tour_3").fadeIn():t===4&&e("#tour_4").fadeIn()},i=function(){e(".overlay").show();e("#tour_modal").fadeIn("fast");e("#tour_1").delay(7e3).fadeOut("fast",function(){t=2;e("#tour_prev").css({opacity:1});e("#tour_btn_1").children().removeClass("tour_nav_blue");e("#tour_btn_1").children().addClass("tour_nav_white");e("#tour_btn_2").children().removeClass("tour_nav_white");e("#tour_btn_2").children().addClass("tour_nav_blue");e("#tour_2").fadeIn("fade").delay(7e3).fadeOut("fast",function(){t=3;e("#tour_next").empty();e("#tour_next").append("next");e("#tour_btn_2").children().removeClass("tour_nav_blue");e("#tour_btn_2").children().addClass("tour_nav_white");e("#tour_btn_3").children().removeClass("tour_nav_white");e("#tour_btn_3").children().addClass("tour_nav_blue");e("#tour_3").fadeIn("fade").delay(7e3).fadeOut("fast",function(){t=4;e("#tour_next").text("Continue");e("#tour_btn_3").children().removeClass("tour_nav_blue");e("#tour_btn_3").children().addClass("tour_nav_white");e("#tour_btn_4").children().removeClass("tour_nav_white");e("#tour_btn_4").children().addClass("tour_nav_blue");e("#tour_4").fadeIn("fade").delay(8e3).fadeOut("fast",function(){a();s().startSyncModal()})})})})},o=function(n,i){t=n;if(n===1){e(".tour_prev").css({opacity:.5});e(".tour_next").empty();e(".tour_next").append("next >");r(1);u("#tour_btn_1")}else if(n===2){e(".tour_prev").css({opacity:1});e(".tour_next").empty();e(".tour_next").append("next >");r(2);u("#tour_btn_2")}else if(n===3){e(".tour_prev").css({opacity:1});e(".tour_next").empty();e(".tour_next").append("next >");r(3);u("#tour_btn_3")}else if(n===4){e(".tour_prev").css({opacity:1});e(".tour_next").text("continue");r(4);u("#tour_btn_4")}else if(n===5){a();s().startSyncModal()}},u=function(t){e('[id^="tour_"]').stop(!0,!0);i=function(){};var n=e(t);n.children().removeClass("tour_nav_white");n.children().addClass("tour_nav_blue");n.siblings("li").children().removeClass("tour_nav_blue");n.siblings("li").children().addClass("tour_nav_white")};e(".tour_nav_circle").unbind("click").bind("click",function(t){e('[id^="tour_"]').stop(!0,!0);i=function(){};var r=this.id;switch(r){case"tour_btn_1":n=1;break;case"tour_btn_2":n=2;break;case"tour_btn_3":n=3;break;case"tour_btn_4":n=4}o(n,"dot")});e(".tour_prev").unbind("click").bind("click",function(r){e('[id^="tour_"]').stop(!0,!0);i=function(){};n=t-1;o(n,"prev")});e(".tour_next").unbind("click").bind("click",function(r){e('[id^="tour_"]').stop(!0,!0);i=function(){};n=t+1;o(n,"next")});e(".close_tour").on("click",function(e){a();s().startSyncModal()});e(".overlay").unbind("click").bind("click",function(){a();s().startSyncModal()});i()},n=function(){e("#tour_next").text("next >");e("#tour_modal").find("section").fadeOut();e("#tour_modal").css("top","18%");e("#tour_1").fadeIn();var t=e("#tour_btn_1");t.children().attr("src","/assets/img/dashboard/tour_nav_blue.gif");t.siblings("li").children("img").attr("src","/assets/img/dashboard/tour_nav_white.gif")};return{startTour:t,tourReset:n}},s=function(){var t=function(){e("#sync_modal").show();e("#sync_email_choices").show();e(".rewatch_tour").unbind("click").bind("click",function(){e("#sync_modal").hide();e("#sync_email_choices").hide();i().tourReset();e("#tour_modal").show()});e(".choose_exchange_gmail").unbind("click").bind("click",function(){e("#sync_email_choices").show();e("#sync_exchange_snarf").hide();e("#exchange_inputs").hide()});e("#btn_sync_exchange").unbind("click").bind("click",function(){e("#sync_email_choices").hide();e("#sync_exchange_snarf").show();e("#exchange_inputs").show()});e("#exchange-simple-form").unbind("submit").bind("submit",function(){WHOAT.dashboard.hideKeyboard(e());var t=e("#sync_exchange_email").val(),n=e("#sync_exchange_password").val(),r={email:t,password:n},i=e("#exchange_simple_btn");e(i).css("cursor","auto");e(i).css("background","#ccc");e(i).text("sync started");e(i).attr("disabled","true");e("#patience_modal").show();e("#sync_exchange_snarf").hide();e("#exchange_inputs").hide();WHOAT.notify.notification().showStatus("Please be patient, this may take a few minutes");WHOAT.networking.postToServerWithAjax("/sync_contacts",r,function(t){console.log(t);e(".notification_container").fadeOut("fast",function(){e(".notification_container").empty()});e(i).text("sync contacts");e(i).removeAttr("disabled");e(i).css("cursor","pointer");e(i).css("background","#f58733");if(t.result==="success"){e(".overlay").hide();e("#patience_modal").hide();e("#sync_modal").hide();e("#widget_msg p").text(t.message);e("#widget_msg").fadeIn("fast")}else if(t.result==="error"){e("#patience_modal").hide();e("#sync_exchange_snarf").show();e("#exchange_inputs_advanced").show();WHOAT.notify.notification().setStatusAndFadeStatus(t.message)}});return!1});e(".close_tour").on("click",function(t){e("#sync_modal").hide();e(".overlay").hide()});e(".overlay").unbind("click").bind("click",function(){e("#sync_modal").hide();e(".overlay").hide()});e(".close_widget_msg").on("click",function(t){e("#widget_msg").hide();e("#widget_msg").empty()})};return{startSyncModal:t}};return{wireTourModal:i,wireSyncModal:s,init:r}}(jQuery,window);$(document).ready(function(){WHOAT.modal.init()});WHOAT.profile=function(e,t,n){"use strict";function r(){}var i=function(e){console.log(e)};return{wireProfile:i,init:r}}(jQuery,window);$(document).ready(function(){WHOAT.profile.init()});WHOAT.notify=function(e,t,n){"use strict";var r=function(){i()},i=function(){function o(e,t){var n=e.height(),r=e.css("height","auto").height();e.height(n);e.stop().animate({height:r},parseInt(t))}var t=function(t){var r;try{r=JSON.parse(t)}catch(i){r=t}var s=r.result==="success",o=e('<div id="notification-div">'),u;s?o.addClass("alert-success"):o.addClass("alert-error");r.message!==n?u=r.message:s?u="Success":u="There was an error. Please try again later.";o.html(e("<h4>").html(u));o.hide();o.appendTo(".notification_container");o.slideDown("slow");e(".notification_container").fadeIn("slow");return o},r=function(n){var r=t(n);setTimeout(function(){e(".notification_container").fadeOut("fast",function(){e(".notification_container").empty()})},5e3);e(".notification_container").unbind("click").bind("click",function(){e(".notification_container").fadeOut("fast",function(){e(".notification_container").empty()})})},i=function(t){var n=e('<div id="notification-div">');n.addClass("alert-success");n.html(e("<h4>").html(t));n.hide();n.appendTo(".notification_container");n.slideDown("fast");e(".notification_container").fadeIn("fast");return n};e(".notification_container").unbind("click").bind("click",function(){e(this).fadeOut("fast")});var s=function(t){var n=t,r=e('<div id="notification-div">');r.addClass("alert-success");r.html(e("<h4>").html(n));r.hide();r.appendTo(".notification_container");r.slideDown("fast");e(".notification_container").fadeIn("fast");setTimeout(function(){e(".notification_container").fadeOut("fast",function(){e(".notification_container").empty()})},6e3);e(".notification_container").unbind("click").bind("click",function(){e(".notification_container").fadeOut("fast",function(){e(".notification_container").empty()})});return r};return{setStatus:t,showStatus:i,showAndFade:s,setStatusAndFadeStatus:r}};return{notification:i,init:r}}(jQuery,window);$(document).ready(function(){WHOAT.notify.init()});